# H∆∞·ªõng d·∫´n Test T·∫°o Template v·ªõi 2 B√†i h·ªçc v√† 2 B√†i t·∫≠p

## C√°ch 1: Test qua Giao di·ªán (Khuy·∫øn ngh·ªã)

### B∆∞·ªõc 1: T·∫°o Template
1. ƒêƒÉng nh·∫≠p v·ªõi t√†i kho·∫£n **Admin** ho·∫∑c **Teacher**
2. Truy c·∫≠p: `http://localhost:3000/documents`
3. Click n√∫t **"T·∫°o Template M·ªõi"**
4. ƒêi·ªÅn th√¥ng tin:
   - **T√™n Template**: `Template Test - To√°n l·ªõp 10`
   - **M√¥ t·∫£**: `Template test v·ªõi 2 b√†i h·ªçc v√† 2 b√†i t·∫≠p`
   - **M√¥n h·ªçc**: Ch·ªçn m·ªôt m√¥n h·ªçc (n·∫øu c√≥)
   - **S·ª©c ch·ª©a**: `30`
5. Click **"L∆∞u"**

### B∆∞·ªõc 2: Th√™m B√†i h·ªçc v√†o Template
1. Sau khi t·∫°o template, click icon **File** (ho·∫∑c icon **M·∫Øt** ƒë·ªÉ xem chi ti·∫øt)
2. B·∫°n s·∫Ω ƒë∆∞·ª£c chuy·ªÉn ƒë·∫øn trang chi ti·∫øt template (gi·ªëng nh∆∞ l·ªõp h·ªçc th∆∞·ªùng)
3. Scroll xu·ªëng ph·∫ßn **"B√†i h·ªçc"**
4. Click **"T·∫£i l√™n b√†i h·ªçc"** ho·∫∑c **"Upload Lesson"**

#### T·∫°o B√†i h·ªçc 1:
- **Ti√™u ƒë·ªÅ**: `B√†i h·ªçc 1: Gi·ªõi thi·ªáu v·ªÅ To√°n h·ªçc`
- **M√¥ t·∫£**: `B√†i h·ªçc gi·ªõi thi·ªáu c√°c kh√°i ni·ªám c∆° b·∫£n v·ªÅ to√°n h·ªçc`
- **Th·ª© t·ª± hi·ªÉn th·ªã**: `1`
- **File**: Upload m·ªôt file PDF ho·∫∑c Word (c√≥ th·ªÉ d√πng file test)
- Click **"T·∫£i l√™n b√†i h·ªçc"**

#### T·∫°o B√†i h·ªçc 2:
- **Ti√™u ƒë·ªÅ**: `B√†i h·ªçc 2: Ph√©p t√≠nh c∆° b·∫£n`
- **M√¥ t·∫£**: `H·ªçc v·ªÅ c√°c ph√©p t√≠nh c·ªông, tr·ª´, nh√¢n, chia`
- **Th·ª© t·ª± hi·ªÉn th·ªã**: `2`
- **File**: Upload m·ªôt file PDF ho·∫∑c Word
- Click **"T·∫£i l√™n b√†i h·ªçc"**

### B∆∞·ªõc 3: T·∫°o B√†i t·∫≠p cho Template
1. V·∫´n ·ªü trang chi ti·∫øt template
2. Scroll xu·ªëng ph·∫ßn **"B√†i t·∫≠p"** ho·∫∑c v√†o menu **"Assignments"**
3. Click **"T·∫°o b√†i t·∫≠p m·ªõi"** ho·∫∑c **"Create Assignment"**

#### T·∫°o B√†i t·∫≠p 1 (Tr·∫Øc nghi·ªám):
1. Click **"T·∫°o b√†i t·∫≠p m·ªõi"**
2. Ch·ªçn **"Tr·∫Øc nghi·ªám"** (Multiple Choice)
3. ƒêi·ªÅn th√¥ng tin:
   - **Ti√™u ƒë·ªÅ**: `B√†i t·∫≠p 1: Tr·∫Øc nghi·ªám To√°n c∆° b·∫£n`
   - **M√¥ t·∫£**: `B√†i t·∫≠p tr·∫Øc nghi·ªám v·ªÅ c√°c ph√©p t√≠nh c∆° b·∫£n`
   - **T·ªïng ƒëi·ªÉm**: `100`
   - **Th·ªùi gian**: `60 ph√∫t`
4. Th√™m c√¢u h·ªèi (√≠t nh·∫•t 1 c√¢u):
   - **C√¢u h·ªèi**: `2 + 2 = ?`
   - **Lo·∫°i**: Tr·∫Øc nghi·ªám
   - **ƒêi·ªÉm**: `10`
   - **ƒê√°p √°n**: 
     - A: `3`
     - B: `4` (ƒê√∫ng)
     - C: `5`
     - D: `6`
5. Click **"L∆∞u b√†i t·∫≠p"**
6. **G√°n cho template**: Ch·ªçn template v·ª´a t·∫°o trong danh s√°ch l·ªõp h·ªçc

#### T·∫°o B√†i t·∫≠p 2 (T·ª± lu·∫≠n):
1. Click **"T·∫°o b√†i t·∫≠p m·ªõi"**
2. Ch·ªçn **"T·ª± lu·∫≠n"** (Essay)
3. ƒêi·ªÅn th√¥ng tin:
   - **Ti√™u ƒë·ªÅ**: `B√†i t·∫≠p 2: T·ª± lu·∫≠n - Gi·∫£i b√†i to√°n`
   - **M√¥ t·∫£**: `B√†i t·∫≠p t·ª± lu·∫≠n y√™u c·∫ßu gi·∫£i c√°c b√†i to√°n`
   - **T·ªïng ƒëi·ªÉm**: `100`
4. Th√™m c√¢u h·ªèi:
   - **C√¢u h·ªèi**: `Gi·∫£i b√†i to√°n: M·ªôt c·ª≠a h√†ng c√≥ 50 quy·ªÉn s√°ch, b√°n ƒëi 20 quy·ªÉn. H·ªèi c√≤n l·∫°i bao nhi√™u quy·ªÉn?`
   - **Lo·∫°i**: T·ª± lu·∫≠n
   - **ƒêi·ªÉm**: `100`
5. Click **"L∆∞u b√†i t·∫≠p"**
6. **G√°n cho template**: Ch·ªçn template v·ª´a t·∫°o trong danh s√°ch l·ªõp h·ªçc

### B∆∞·ªõc 4: Ki·ªÉm tra k·∫øt qu·∫£
1. Quay l·∫°i trang `http://localhost:3000/documents`
2. Click icon **M·∫Øt** (üëÅÔ∏è) tr√™n template v·ª´a t·∫°o
3. Xem trong dialog:
   - **B√†i h·ªçc**: Ph·∫£i c√≥ 2 b√†i h·ªçc
   - **B√†i t·∫≠p**: Ph·∫£i c√≥ 2 b√†i t·∫≠p

## C√°ch 2: Test b·∫±ng Script Python

### Y√™u c·∫ßu:
- Python 3.7+
- Th∆∞ vi·ªán `requests`: `pip install requests`
- Backend server ƒëang ch·∫°y
- Token authentication

### C√°c b∆∞·ªõc:
1. M·ªü file `test_create_template_with_content.py`
2. Thay ƒë·ªïi `AUTH_TOKEN` b·∫±ng token th·ª±c t·∫ø c·ªßa b·∫°n
3. Ch·∫°y script:
   ```bash
   python test_create_template_with_content.py
   ```

### L·∫•y Token:
1. ƒêƒÉng nh·∫≠p v√†o frontend
2. M·ªü Developer Tools (F12)
3. V√†o tab **Console**
4. Ch·∫°y l·ªánh:
   ```javascript
   localStorage.getItem('auth_token')
   ```
5. Copy token v√† paste v√†o script

## C√°ch 3: Test b·∫±ng API tr·ª±c ti·∫øp (Postman/curl)

### 1. T·∫°o Template
```bash
curl -X POST http://localhost:8000/api/template-classrooms/ \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Template Test - To√°n l·ªõp 10",
    "description": "Template test v·ªõi 2 b√†i h·ªçc v√† 2 b√†i t·∫≠p",
    "capacity": 30
  }'
```

L∆∞u `template_id` t·ª´ response.

### 2. T·∫°o B√†i h·ªçc 1
```bash
curl -X POST http://localhost:8000/api/lessons/upload \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -F "classroom_id=TEMPLATE_ID" \
  -F "title=B√†i h·ªçc 1: Gi·ªõi thi·ªáu v·ªÅ To√°n h·ªçc" \
  -F "description=B√†i h·ªçc gi·ªõi thi·ªáu c√°c kh√°i ni·ªám c∆° b·∫£n" \
  -F "sort_order=1" \
  -F "files=@test_file.pdf"
```

### 3. T·∫°o B√†i h·ªçc 2
```bash
curl -X POST http://localhost:8000/api/lessons/upload \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -F "classroom_id=TEMPLATE_ID" \
  -F "title=B√†i h·ªçc 2: Ph√©p t√≠nh c∆° b·∫£n" \
  -F "description=H·ªçc v·ªÅ c√°c ph√©p t√≠nh c·ªông, tr·ª´, nh√¢n, chia" \
  -F "sort_order=2" \
  -F "files=@test_file.pdf"
```

### 4. T·∫°o B√†i t·∫≠p 1
```bash
curl -X POST http://localhost:8000/api/assignments/ \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "B√†i t·∫≠p 1: Tr·∫Øc nghi·ªám To√°n c∆° b·∫£n",
    "description": "B√†i t·∫≠p tr·∫Øc nghi·ªám v·ªÅ c√°c ph√©p t√≠nh c∆° b·∫£n",
    "assignment_type": "multiple_choice",
    "total_points": 100.0,
    "time_limit_minutes": 60
  }'
```

Sau ƒë√≥ g√°n cho template:
```bash
curl -X POST http://localhost:8000/api/assignments/ASSIGNMENT_ID/classrooms \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '["TEMPLATE_ID"]'
```

### 5. T·∫°o B√†i t·∫≠p 2
```bash
curl -X POST http://localhost:8000/api/assignments/ \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "B√†i t·∫≠p 2: T·ª± lu·∫≠n - Gi·∫£i b√†i to√°n",
    "description": "B√†i t·∫≠p t·ª± lu·∫≠n y√™u c·∫ßu gi·∫£i c√°c b√†i to√°n",
    "assignment_type": "essay",
    "total_points": 100.0
  }'
```

G√°n cho template t∆∞∆°ng t·ª± nh∆∞ tr√™n.

### 6. Ki·ªÉm tra k·∫øt qu·∫£
```bash
# L·∫•y danh s√°ch b√†i h·ªçc
curl http://localhost:8000/api/template-classrooms/TEMPLATE_ID/lessons \
  -H "Authorization: Bearer YOUR_TOKEN"

# L·∫•y danh s√°ch b√†i t·∫≠p
curl http://localhost:8000/api/template-classrooms/TEMPLATE_ID/assignments \
  -H "Authorization: Bearer YOUR_TOKEN"
```

## Checklist Test

- [ ] Template ƒë√£ ƒë∆∞·ª£c t·∫°o th√†nh c√¥ng
- [ ] Template c√≥ 2 b√†i h·ªçc
- [ ] Template c√≥ 2 b√†i t·∫≠p
- [ ] C√≥ th·ªÉ xem chi ti·∫øt template
- [ ] C√≥ th·ªÉ t·∫°o l·ªõp h·ªçc t·ª´ template
- [ ] Khi t·∫°o l·ªõp h·ªçc, b√†i h·ªçc ƒë∆∞·ª£c copy ƒë√∫ng
- [ ] Khi t·∫°o l·ªõp h·ªçc, b√†i t·∫≠p ƒë∆∞·ª£c copy ƒë√∫ng
- [ ] L·ªãch s·ª≠ s·ª≠ d·ª•ng template ƒë∆∞·ª£c l∆∞u

## Troubleshooting

### L·ªói: "Not enough permissions"
- ƒê·∫£m b·∫£o b·∫°n ƒëƒÉng nh·∫≠p v·ªõi quy·ªÅn Admin ho·∫∑c Teacher
- Ki·ªÉm tra token c√≥ h·ª£p l·ªá kh√¥ng

### L·ªói: "Template not found"
- Ki·ªÉm tra template_id c√≥ ƒë√∫ng kh√¥ng
- ƒê·∫£m b·∫£o template ƒë√£ ƒë∆∞·ª£c t·∫°o th√†nh c√¥ng

### B√†i h·ªçc/B√†i t·∫≠p kh√¥ng hi·ªÉn th·ªã
- Ki·ªÉm tra xem b√†i h·ªçc/b√†i t·∫≠p ƒë√£ ƒë∆∞·ª£c g√°n ƒë√∫ng cho template ch∆∞a
- Ki·ªÉm tra `classroom_id` trong b√†i h·ªçc/b√†i t·∫≠p c√≥ tr√πng v·ªõi `template_id` kh√¥ng

### Kh√¥ng th·ªÉ upload file
- Ki·ªÉm tra file c√≥ ƒë√∫ng ƒë·ªãnh d·∫°ng kh√¥ng
- Ki·ªÉm tra k√≠ch th∆∞·ªõc file (t·ªëi ƒëa 50MB)
- Ki·ªÉm tra quy·ªÅn truy c·∫≠p storage




