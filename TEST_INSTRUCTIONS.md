# HÆ°á»›ng dáº«n Test Táº¡o Template vá»›i 2 BÃ i há»c vÃ  2 BÃ i táº­p

## CÃ¡ch 1: Test qua Browser Console (Nhanh nháº¥t) âš¡

### BÆ°á»›c 1: Chuáº©n bá»‹
1. Äáº£m báº£o backend Ä‘ang cháº¡y: `http://localhost:8000`
2. Äáº£m báº£o frontend Ä‘ang cháº¡y: `http://localhost:3000`
3. ÄÄƒng nháº­p vá»›i tÃ i khoáº£n **Admin** hoáº·c **Teacher**

### BÆ°á»›c 2: Cháº¡y Script
1. Má»Ÿ trang báº¥t ká»³ trong frontend (vÃ­ dá»¥: `http://localhost:3000/documents`)
2. Má»Ÿ **Developer Tools** (F12 hoáº·c Ctrl+Shift+I)
3. VÃ o tab **Console**
4. Copy toÃ n bá»™ ná»™i dung file `test_template_automated.js`
5. Paste vÃ o Console vÃ  nháº¥n Enter

### BÆ°á»›c 3: Xem káº¿t quáº£
Script sáº½ tá»± Ä‘á»™ng:
- âœ… Táº¡o template
- âœ… Táº¡o 2 bÃ i há»c
- âœ… Táº¡o 2 bÃ i táº­p
- âœ… GÃ¡n bÃ i táº­p cho template
- âœ… Hiá»ƒn thá»‹ káº¿t quáº£

Káº¿t quáº£ sáº½ hiá»ƒn thá»‹ trong Console vá»›i thÃ´ng tin chi tiáº¿t.

---

## CÃ¡ch 2: Test thá»§ cÃ´ng qua Giao diá»‡n (Chi tiáº¿t) ğŸ–±ï¸

### BÆ°á»›c 1: Táº¡o Template
1. Truy cáº­p: `http://localhost:3000/documents`
2. Click **"Táº¡o Template Má»›i"**
3. Äiá»n thÃ´ng tin:
   ```
   TÃªn Template: Template Test - ToÃ¡n lá»›p 10
   MÃ´ táº£: Template test vá»›i 2 bÃ i há»c vÃ  2 bÃ i táº­p
   Sá»©c chá»©a: 30
   ```
4. Click **"LÆ°u"**
5. **LÆ°u Template ID** (sáº½ cáº§n dÃ¹ng sau)

### BÆ°á»›c 2: ThÃªm BÃ i há»c 1
1. Click icon **ğŸ“„ File** trÃªn template vá»«a táº¡o (hoáº·c click **ğŸ‘ï¸ Máº¯t** rá»“i click **"Má»Ÿ Ä‘á»ƒ quáº£n lÃ½"**)
2. Scroll xuá»‘ng pháº§n **"BÃ i há»c"**
3. Click **"Táº£i lÃªn bÃ i há»c"**
4. Äiá»n form:
   ```
   TiÃªu Ä‘á»: BÃ i há»c 1: Giá»›i thiá»‡u vá» ToÃ¡n há»c
   MÃ´ táº£: BÃ i há»c giá»›i thiá»‡u cÃ¡c khÃ¡i niá»‡m cÆ¡ báº£n vá» toÃ¡n há»c
   Thá»© tá»± hiá»ƒn thá»‹: 1
   File: Upload file báº¥t ká»³ (PDF, Word, ...)
   ```
5. Click **"Táº£i lÃªn bÃ i há»c"**

### BÆ°á»›c 3: ThÃªm BÃ i há»c 2
1. Váº«n á»Ÿ trang chi tiáº¿t template
2. Click **"Táº£i lÃªn bÃ i há»c"** láº§n ná»¯a
3. Äiá»n form:
   ```
   TiÃªu Ä‘á»: BÃ i há»c 2: PhÃ©p tÃ­nh cÆ¡ báº£n
   MÃ´ táº£: Há»c vá» cÃ¡c phÃ©p tÃ­nh cá»™ng, trá»«, nhÃ¢n, chia
   Thá»© tá»± hiá»ƒn thá»‹: 2
   File: Upload file báº¥t ká»³
   ```
4. Click **"Táº£i lÃªn bÃ i há»c"**

### BÆ°á»›c 4: Táº¡o BÃ i táº­p 1 (Tráº¯c nghiá»‡m)
1. VÃ o menu **"Assignments"** hoáº·c scroll xuá»‘ng pháº§n **"BÃ i táº­p"**
2. Click **"Táº¡o bÃ i táº­p má»›i"** hoáº·c **"Create Assignment"**
3. Chá»n **"Tráº¯c nghiá»‡m"** (Multiple Choice)
4. Äiá»n thÃ´ng tin:
   ```
   TiÃªu Ä‘á»: BÃ i táº­p 1: Tráº¯c nghiá»‡m ToÃ¡n cÆ¡ báº£n
   MÃ´ táº£: BÃ i táº­p tráº¯c nghiá»‡m vá» cÃ¡c phÃ©p tÃ­nh cÆ¡ báº£n
   Tá»•ng Ä‘iá»ƒm: 100
   Thá»i gian: 60 phÃºt
   ```
5. ThÃªm cÃ¢u há»i:
   - Click **"ThÃªm cÃ¢u há»i"**
   - **CÃ¢u há»i**: `2 + 2 = ?`
   - **Loáº¡i**: Tráº¯c nghiá»‡m
   - **Äiá»ƒm**: `10`
   - **ÄÃ¡p Ã¡n**:
     - A: `3`
     - B: `4` âœ… (ÄÃºng)
     - C: `5`
     - D: `6`
   - Click **"LÆ°u cÃ¢u há»i"**
6. Click **"LÆ°u bÃ i táº­p"**
7. **GÃ¡n cho template**: 
   - TÃ¬m template vá»«a táº¡o trong danh sÃ¡ch
   - Chá»n template
   - Click **"GÃ¡n"** hoáº·c **"Assign"**

### BÆ°á»›c 5: Táº¡o BÃ i táº­p 2 (Tá»± luáº­n)
1. Click **"Táº¡o bÃ i táº­p má»›i"** láº§n ná»¯a
2. Chá»n **"Tá»± luáº­n"** (Essay)
3. Äiá»n thÃ´ng tin:
   ```
   TiÃªu Ä‘á»: BÃ i táº­p 2: Tá»± luáº­n - Giáº£i bÃ i toÃ¡n
   MÃ´ táº£: BÃ i táº­p tá»± luáº­n yÃªu cáº§u giáº£i cÃ¡c bÃ i toÃ¡n
   Tá»•ng Ä‘iá»ƒm: 100
   ```
4. ThÃªm cÃ¢u há»i:
   - Click **"ThÃªm cÃ¢u há»i"**
   - **CÃ¢u há»i**: `Giáº£i bÃ i toÃ¡n: Má»™t cá»­a hÃ ng cÃ³ 50 quyá»ƒn sÃ¡ch, bÃ¡n Ä‘i 20 quyá»ƒn. Há»i cÃ²n láº¡i bao nhiÃªu quyá»ƒn?`
   - **Loáº¡i**: Tá»± luáº­n
   - **Äiá»ƒm**: `100`
   - Click **"LÆ°u cÃ¢u há»i"**
5. Click **"LÆ°u bÃ i táº­p"**
6. **GÃ¡n cho template**: Chá»n template vá»«a táº¡o

### BÆ°á»›c 6: Kiá»ƒm tra káº¿t quáº£
1. Quay láº¡i: `http://localhost:3000/documents`
2. Click icon **ğŸ‘ï¸ Máº¯t** trÃªn template vá»«a táº¡o
3. Xem trong dialog:
   - **BÃ i há»c**: Pháº£i cÃ³ 2 bÃ i
   - **BÃ i táº­p**: Pháº£i cÃ³ 2 bÃ i

---

## CÃ¡ch 3: Test báº±ng Postman/Thunder Client

### 1. Táº¡o Template
```
POST http://localhost:8000/api/template-classrooms/
Headers:
  Authorization: Bearer YOUR_TOKEN
  Content-Type: application/json

Body:
{
  "name": "Template Test - ToÃ¡n lá»›p 10",
  "description": "Template test vá»›i 2 bÃ i há»c vÃ  2 bÃ i táº­p",
  "capacity": 30
}
```

### 2. Táº¡o BÃ i há»c 1
```
POST http://localhost:8000/api/lessons/upload
Headers:
  Authorization: Bearer YOUR_TOKEN

Body (form-data):
  classroom_id: TEMPLATE_ID
  title: BÃ i há»c 1: Giá»›i thiá»‡u vá» ToÃ¡n há»c
  description: BÃ i há»c giá»›i thiá»‡u cÃ¡c khÃ¡i niá»‡m cÆ¡ báº£n
  sort_order: 1
  files: [chá»n file]
```

### 3. Táº¡o BÃ i há»c 2
TÆ°Æ¡ng tá»± bÃ i há»c 1, thay:
- `title: BÃ i há»c 2: PhÃ©p tÃ­nh cÆ¡ báº£n`
- `sort_order: 2`

### 4. Táº¡o BÃ i táº­p 1
```
POST http://localhost:8000/api/assignments/
Headers:
  Authorization: Bearer YOUR_TOKEN
  Content-Type: application/json

Body:
{
  "title": "BÃ i táº­p 1: Tráº¯c nghiá»‡m ToÃ¡n cÆ¡ báº£n",
  "description": "BÃ i táº­p tráº¯c nghiá»‡m vá» cÃ¡c phÃ©p tÃ­nh cÆ¡ báº£n",
  "assignment_type": "multiple_choice",
  "total_points": 100.0,
  "time_limit_minutes": 60,
  "subject_id": "SUBJECT_ID",
  "teacher_id": "TEACHER_ID"
}
```

Sau Ä‘Ã³ gÃ¡n cho template:
```
POST http://localhost:8000/api/assignments/ASSIGNMENT_ID/classrooms
Headers:
  Authorization: Bearer YOUR_TOKEN
  Content-Type: application/json

Body: ["TEMPLATE_ID"]
```

### 5. Táº¡o BÃ i táº­p 2
TÆ°Æ¡ng tá»± bÃ i táº­p 1, thay:
- `title: BÃ i táº­p 2: Tá»± luáº­n - Giáº£i bÃ i toÃ¡n`
- `assignment_type: essay`
- `time_limit_minutes: 0`

### 6. Kiá»ƒm tra
```
GET http://localhost:8000/api/template-classrooms/TEMPLATE_ID/lessons
GET http://localhost:8000/api/template-classrooms/TEMPLATE_ID/assignments
```

---

## Checklist Test âœ…

Sau khi test, kiá»ƒm tra:

- [ ] Template Ä‘Ã£ Ä‘Æ°á»£c táº¡o thÃ nh cÃ´ng
- [ ] Template cÃ³ Ä‘Ãºng 2 bÃ i há»c
- [ ] Template cÃ³ Ä‘Ãºng 2 bÃ i táº­p
- [ ] CÃ³ thá»ƒ xem chi tiáº¿t template (click icon ğŸ‘ï¸)
- [ ] CÃ³ thá»ƒ má»Ÿ template Ä‘á»ƒ quáº£n lÃ½ (click icon ğŸ“„)
- [ ] CÃ³ thá»ƒ táº¡o lá»›p há»c tá»« template (click icon ğŸ“‹)
- [ ] Khi táº¡o lá»›p há»c, bÃ i há»c Ä‘Æ°á»£c copy Ä‘Ãºng
- [ ] Khi táº¡o lá»›p há»c, bÃ i táº­p Ä‘Æ°á»£c copy Ä‘Ãºng
- [ ] Lá»‹ch sá»­ sá»­ dá»¥ng template Ä‘Æ°á»£c lÆ°u

---

## Troubleshooting ğŸ”§

### Lá»—i: "Not enough permissions"
- âœ… Äáº£m báº£o Ä‘Äƒng nháº­p vá»›i quyá»n Admin hoáº·c Teacher
- âœ… Kiá»ƒm tra token cÃ³ há»£p lá»‡ khÃ´ng

### Lá»—i: "Template not found"
- âœ… Kiá»ƒm tra template_id cÃ³ Ä‘Ãºng khÃ´ng
- âœ… Äáº£m báº£o template Ä‘Ã£ Ä‘Æ°á»£c táº¡o thÃ nh cÃ´ng

### BÃ i há»c khÃ´ng hiá»ƒn thá»‹
- âœ… Kiá»ƒm tra `classroom_id` trong bÃ i há»c cÃ³ trÃ¹ng vá»›i `template_id` khÃ´ng
- âœ… Kiá»ƒm tra file Ä‘Ã£ upload thÃ nh cÃ´ng chÆ°a

### BÃ i táº­p khÃ´ng hiá»ƒn thá»‹
- âœ… Kiá»ƒm tra bÃ i táº­p Ä‘Ã£ Ä‘Æ°á»£c gÃ¡n cho template chÆ°a (qua API `/api/assignments/{id}/classrooms`)
- âœ… Kiá»ƒm tra `assignment_classrooms` table cÃ³ record khÃ´ng

### KhÃ´ng thá»ƒ upload file
- âœ… Kiá»ƒm tra file cÃ³ Ä‘Ãºng Ä‘á»‹nh dáº¡ng khÃ´ng (PDF, Word, PowerPoint, Excel, Text, ZIP)
- âœ… Kiá»ƒm tra kÃ­ch thÆ°á»›c file (tá»‘i Ä‘a 50MB)
- âœ… Kiá»ƒm tra quyá»n truy cáº­p storage

---

## Káº¿t quáº£ mong Ä‘á»£i ğŸ¯

Sau khi test thÃ nh cÃ´ng:
- Template cÃ³ 2 bÃ i há»c vá»›i tiÃªu Ä‘á» rÃµ rÃ ng
- Template cÃ³ 2 bÃ i táº­p (1 tráº¯c nghiá»‡m, 1 tá»± luáº­n)
- CÃ³ thá»ƒ xem táº¥t cáº£ trong dialog chi tiáº¿t template
- CÃ³ thá»ƒ táº¡o lá»›p há»c má»›i tá»« template vÃ  copy Ä‘áº§y Ä‘á»§ ná»™i dung

